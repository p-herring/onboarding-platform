<!DOCTYPE html>
<html>
<head>
  <title>New User Onboarding</title>
</head>
<body>
  <h2>New User Onboarding Portal</h2>
  <form id="onboard-form">
    <label>First Name:</label><br>
    <input type="text" name="first_name"><br>
    <label>Last Name:</label><br>
    <input type="text" name="last_name"><br>
    <label>Role:</label><br>
    <select name="role">
      <option value="Standard">Standard</option>
      <option value="Manager">Manager</option>
    </select><br><br>
    <input type="submit" value="Submit">
  </form>

  <script>
    const form = document.getElementById("onboard-form");
    form.addEventListener("submit", async function(e) {
      e.preventDefault();
  
      const data = new FormData(form);
      const response = await fetch("http://127.0.0.1:5000/api/provision_user", {
        method: "POST",
        body: data,
      });
  
      const result = await response.json();
  
      // âœ… Redirect to local file (not Flask)
      window.location.href = `success.html?status=${result.status}&user=${encodeURIComponent(result.user)}`;
    });
  </script>
</body>
</html>
